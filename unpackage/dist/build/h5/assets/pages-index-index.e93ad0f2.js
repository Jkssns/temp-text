import{r as e,B as a,o as l,c as t,w as o,i as n,a as d,b as s,n as u,d as c,s as i,I as r,e as v}from"./index-cc6a03b7.js";const p=((e,a)=>{const l=e.__vccOpts||e;for(const[t,o]of a)l[t]=o;return l})({__name:"index",setup(p){const h=e(""),m=e(""),x=e(),_=a.database().collection("temp-text"),f=e(!1),g=()=>{const e=m.value;e.length>=4&&e.length<=10?_.get().then((a=>{const l=a.result.data.find((a=>a.password===e));l?(i({title:"获取成功",icon:"none"}),h.value=l.text,x.value=l):_.add({password:m.value}).then((e=>{i({title:"添加成功",icon:"none"}),f.value=!0,x.value={_id:e.result.id}})).catch((()=>{V()}))})).catch((e=>{V()})):i({title:"请输入4-10位密码",icon:"none"})},b=()=>{h.value?_.doc(x.value._id).update({text:h.value}).then((()=>{i({title:"添加/更新成功",icon:"none"})})).catch((()=>{V()})):i({title:"请输入",icon:"none"})},y=()=>{_.doc(x.value._id).remove().then((e=>{x.value={},m.value="",h.value="",f.value=!1,i({title:"删除成功",icon:"none"})})).catch((()=>{V()}))},V=()=>{alert("服务器错误，请联系维护人，微信号：Ted-Mosdy")};return(e,a)=>{const i=r,p=v,x=n;return l(),t(x,{class:"content"},{default:o((()=>[d("section",null,[d("div",null,[s(i,{style:u([{border:"1px solid",height:"40px"},{background:f.value?"#eee":""}]),type:"text",maxlength:"10",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),placeholder:"请输入4-10位密码",disabled:f.value},null,8,["style","modelValue","disabled"]),s(p,{onClick:g},{default:o((()=>[c("设置/输入密码")])),_:1})])]),d("main",null,[s(i,{style:{height:"300px",border:"1px solid"},type:"textarea",modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),maxlength:"-1",placeholder:"请输入需要传输的文本"},null,8,["modelValue"]),s(p,{onClick:b},{default:o((()=>[c("完成/更新")])),_:1}),s(p,{onClick:y},{default:o((()=>[c("删除本条记录（无副本，彻底删除）")])),_:1})]),d("footer",{class:"footer_tip"},"Tip：任何人可以输入任何密码，请不要设置得过于简单。")])),_:1})}}},[["__scopeId","data-v-a534895c"]]);export{p as default};
